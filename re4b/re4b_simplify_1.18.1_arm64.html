<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Simplify RE4B example 1.18.1 arm64 example</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Simplify RE4B example 1.18.1 arm64 example</h1>
<p class="date">Sat Mar 25 2023</p>
</header>
<p>Recently I started reading <code>Reverse Engineering for Beginners</code> by Dennis Yurichev to learn x86 and arm64 assembly. Chapter 1.18.1 on conditional jumps has an interesting arm64 exercise, so I thought I’d go through it step by step. The sauce is as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> f_signed <span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">&gt;</span>b<span class="op">)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        printf <span class="op">(</span><span class="st">&quot;a&gt;b</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">==</span>b<span class="op">)</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        printf <span class="op">(</span><span class="st">&quot;a==b</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">&lt;</span>b<span class="op">)</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        printf <span class="op">(</span><span class="st">&quot;a&lt;b</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> f_unsigned <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">int</span> a<span class="op">,</span> <span class="dt">unsigned</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">&gt;</span>b<span class="op">)</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        printf <span class="op">(</span><span class="st">&quot;a&gt;b</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">==</span>b<span class="op">)</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        printf <span class="op">(</span><span class="st">&quot;a==b</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a<span class="op">&lt;</span>b<span class="op">)</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        printf <span class="op">(</span><span class="st">&quot;a&lt;b</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    f_signed<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    f_unsigned<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>Dennis’s arm64 compiler (gcc Linaro 4.9) generates this “optimzed” code for the two <code>f_*</code> functions:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>f_signed <span class="op">(</span>int a<span class="op">,</span> int b<span class="op">):</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    // W0<span class="op">=</span>a<span class="op">,</span> W1<span class="op">=</span>b</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cmp</span> w0<span class="op">,</span> w1</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    bgt <span class="op">.</span>L19 <span class="op">//</span> Branch if Greater Than <span class="op">(</span>a<span class="op">&gt;</span>b<span class="op">)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    beq <span class="op">.</span>L20 <span class="op">//</span> Branch if Equal <span class="op">(</span>a<span class="op">==</span>b<span class="op">)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    bge <span class="op">.</span>L15 <span class="op">//</span> Branch if Greater than <span class="op">or</span> Equal <span class="op">(</span>a<span class="op">&gt;=</span>b<span class="op">)</span> <span class="op">(</span>impossible here<span class="op">)</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    // a<span class="op">&lt;</span>b</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC11 <span class="op">//</span> <span class="st">&quot;a&lt;b&quot;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC11</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">.L19:</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC9 <span class="op">//</span> <span class="st">&quot;a&gt;b&quot;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC9</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">.L15:</span> // impossible to get here</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">ret</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fu">.L20:</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC10 <span class="op">//</span> <span class="st">&quot;a==b&quot;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC10</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>f_unsigned <span class="op">(</span>unsigned int a<span class="op">,</span> unsigned int b<span class="op">):</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    stp x29<span class="op">,</span> x30<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">,</span> <span class="op">-</span><span class="dv">48</span><span class="op">]!</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    // W0<span class="op">=</span>a<span class="op">,</span> W1<span class="op">=</span>b</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cmp</span> w0<span class="op">,</span> w1</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x29<span class="op">,</span> <span class="kw">sp</span><span class="op">,</span> <span class="dv">0</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span> x19<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">,</span><span class="dv">16</span><span class="op">]</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w19<span class="op">,</span> w0</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    bhi <span class="op">.</span>L25 <span class="op">//</span> Branch if HIgher <span class="op">(</span>a<span class="op">&gt;</span>b<span class="op">)</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cmp</span> w19<span class="op">,</span> w1</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    beq <span class="op">.</span>L26 <span class="op">//</span> Branch if Equal <span class="op">(</span>a<span class="op">==</span>b<span class="op">)</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="fu">.L23:</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    bcc <span class="op">.</span>L27 <span class="op">//</span> Branch if Carry Clear <span class="op">(</span>if less than<span class="op">)</span> <span class="op">(</span>a<span class="op">&lt;</span>b<span class="op">)</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    // function epilogue<span class="op">,</span> impossible to be here</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    ldr x19<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">,</span><span class="dv">16</span><span class="op">]</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    ldp x29<span class="op">,</span> x30<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">],</span> <span class="dv">48</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">ret</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="fu">.L27:</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    ldr x19<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">,</span><span class="dv">16</span><span class="op">]</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC11 <span class="op">//</span> <span class="st">&quot;a&lt;b&quot;</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    ldp x29<span class="op">,</span> x30<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">],</span> <span class="dv">48</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC11</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="fu">.L25:</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC9 <span class="op">//</span> <span class="st">&quot;a&gt;b&quot;</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span> x1<span class="op">,</span> <span class="op">[</span>x29<span class="op">,</span><span class="dv">40</span><span class="op">]</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC9</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    bl puts</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    ldr x1<span class="op">,</span> <span class="op">[</span>x29<span class="op">,</span><span class="dv">40</span><span class="op">]</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cmp</span> w19<span class="op">,</span> w1</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    bne <span class="op">.</span>L23 <span class="op">//</span> Branch if <span class="op">Not</span> Equal</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="fu">.L26:</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    ldr x19<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">,</span><span class="dv">16</span><span class="op">]</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC10 <span class="op">//</span> <span class="st">&quot;a==b&quot;</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    ldp x29<span class="op">,</span> x30<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">],</span> <span class="dv">48</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC10</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    b puts</span></code></pre></div>
<p>This code contains dead code[1] and redundant instructions which the author asks us to remove.</p>
<h2 id="make-the-code-runnable">Make the code runnable</h2>
<p>Before we start I had to add a few things to get the code to assemble and run (with aarch64-gcc 12.2.1):</p>
<ol type="1">
<li>The strings</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.LC9:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>        .string <span class="st">&quot;a&gt;b&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">.LC10:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        .string <span class="st">&quot;a==b&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">.LC11:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        .string <span class="st">&quot;a&lt;b&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">.LC12:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        .string <span class="st">&quot;f_signed:&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.LC13:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        .string <span class="st">&quot;\nf_unsigned:&quot;</span></span></code></pre></div>
<ol start="2" type="1">
<li>The main function</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>.globl main</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">main:</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    stp x29<span class="op">,</span> x30<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">,</span> <span class="op">-</span><span class="dv">16</span><span class="op">]!</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> x29<span class="op">,</span> <span class="kw">sp</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC12 <span class="op">//</span> <span class="st">&quot;f_signed&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span> x1<span class="op">,</span> <span class="op">[</span>x29<span class="op">,</span><span class="dv">40</span><span class="op">]</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC12</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    bl puts</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w1<span class="op">,</span> <span class="dv">2</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    bl f_signed</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w1<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    bl f_signed</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w1<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">2</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    bl f_signed</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC13 <span class="op">//</span> <span class="st">&quot;f_unsigned&quot;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">str</span> x1<span class="op">,</span> <span class="op">[</span>x29<span class="op">,</span><span class="dv">40</span><span class="op">]</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC13</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    bl puts</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w1<span class="op">,</span> <span class="dv">2</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    bl f_unsigned</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w1<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    bl f_unsigned</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w1<span class="op">,</span> <span class="dv">1</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">2</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    bl f_unsigned</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">mov</span> w0<span class="op">,</span> <span class="dv">0</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    ldp x29<span class="op">,</span> x30<span class="op">,</span> <span class="op">[</span><span class="kw">sp</span><span class="op">],</span> <span class="dv">16</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">ret</span></span></code></pre></div>
<ol start="3" type="1">
<li>Change the function signatures:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>    f_signed<span class="op">(</span>int<span class="op">,</span> int<span class="op">)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    f_unsigned<span class="op">(</span>unsigned int<span class="op">,</span> unsigned int<span class="op">)</span></span></code></pre></div>
<p>becomes just</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>    f_signed</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    f_unsigned</span></code></pre></div>
<ol start="4" type="1">
<li>align the f_signed function</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>.balign <span class="dv">4</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f_signed:</span></span></code></pre></div>
<p>Now we can assemble and run</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">qemu-aarch64:~$</span> gcc ex.s <span class="at">-o</span> ex</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">qemu-aarch64:~$</span> ./ex</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="ex">f_signed:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="ex">a</span><span class="op">&lt;</span>b</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="va">a</span><span class="op">=</span>=b</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="ex">a</span><span class="op">&gt;</span>b</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="ex">f_unsigned:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="ex">a</span><span class="op">&lt;</span>b</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="va">a</span><span class="op">=</span>=b</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="ex">a</span><span class="op">&gt;</span>b</span></code></pre></div>
<h2 id="remove-dead-code">Remove dead code</h2>
<p>Let’s start easy by removing, and move the LDP (Load Pair) call restoring x29, x30 and the stack pointer into label <code>.L25</code>. The <code>bl</code> call in <code>.L25</code> also needs to be converted to a <code>b</code> call since <code>bl</code> modifies the r14 return register making us return to the instruction immediately below instead of back to main. These changes results in the following diff:</p>
<pre><b>--- ex1.18.1_arm64.s</b>    <b>2023-03-25 14:20:13.382373022 +0100</b>
<b>+++ tmp.s</b>    <b>2023-03-25 14:20:20.866261321 +0100</b>
<font color="#2AA1B3">@@ -15,8 +15,6 @@</font>
     cmp w0, w1
     bgt .L19 // Branch if Greater Than (a&gt;b)
     beq .L20 // Branch if Equal (a==b)
<font color="#C01C28">-    bge .L15 // Branch if Greater than or Equal (a&gt;=b) (impossible</font>
<font color="#C01C28">-    here)</font>
     // a&lt;b
     adrp x0, .LC11 // &quot;a&lt;b&quot;
     add x0, x0, :lo12:.LC11
<font color="#2AA1B3">@@ -25,8 +23,6 @@</font>
     adrp x0, .LC9 // &quot;a&gt;b&quot;
     add x0, x0, :lo12:.LC9
     b puts
<font color="#C01C28">-.L15: // impossible to get here</font>
<font color="#C01C28">-    ret</font>
 .L20:
     adrp x0, .LC10 // &quot;a==b&quot;
     add x0, x0, :lo12:.LC10
<font color="#2AA1B3">@@ -42,12 +38,6 @@</font>
     bhi .L25 // Branch if HIgher (a&gt;b)
     cmp w19, w1
     beq .L26 // Branch if Equal (a==b)
<font color="#C01C28">-.L23:</font>
<font color="#C01C28">-    bcc .L27 // Branch if Carry Clear (if less than) (a&lt;b)</font>
<font color="#C01C28">-    // function epilogue, impossible to be here</font>
<font color="#C01C28">-    ldr x19, [sp,16]</font>
<font color="#C01C28">-    ldp x29, x30, [sp], 48</font>
<font color="#C01C28">-    ret</font>
 .L27:
     ldr x19, [sp,16]
     adrp x0, .LC11 // &quot;a&lt;b&quot;
<font color="#2AA1B3">@@ -57,11 +47,9 @@</font>
 .L25:
     adrp x0, .LC9 // &quot;a&gt;b&quot;
     str x1, [x29,40]
<font color="#26A269">+    ldp x29, x30, [sp], 48</font>
     add x0, x0, :lo12:.LC9
<font color="#C01C28">-    bl puts</font>
<font color="#C01C28">-    ldr x1, [x29,40]</font>
<font color="#C01C28">-    cmp w19, w1</font>
<font color="#C01C28">-    bne .L23 // Branch if Not Equal</font>
<font color="#26A269">+    b puts</font>
 .L26:
     ldr x19, [sp,16]
     adrp x0, .LC10 // &quot;a==b&quot;
</pre>
Since the variables are stored in registers w0 and w1 and we don’t use the stack we can remove stp (Store Pair) call and the ldp calls, as well as the <code>add x29, sp, 0</code> which stores the stack frame in register x29:
<pre><b>--- tmp.s</b>   <b>2023-03-25 14:42:53.258266321 +0100</b>
<b>+++ tmp2.s</b>   <b>2023-03-25 14:46:42.466947431 +0100</b>
<font color="#2AA1B3">@@ -29,10 +29,8 @@</font>
     b puts
 
 f_unsigned:
<font color="#C01C28">-    stp x29, x30, [sp, -48]!</font>
     // W0=a, W1=b
     cmp w0, w1
<font color="#C01C28">-    add x29, sp, 0</font>
     str x19, [sp,16]
     mov w19, w0
     bhi .L25 // Branch if HIgher (a&gt;b)
<font color="#2AA1B3">@@ -41,19 +39,16 @@</font>
 .L27:
     ldr x19, [sp,16]
     adrp x0, .LC11 // &quot;a&lt;b&quot;
<font color="#C01C28">-    ldp x29, x30, [sp], 48</font>
     add x0, x0, :lo12:.LC11
     b puts
 .L25:
     adrp x0, .LC9 // &quot;a&gt;b&quot;
     str x1, [x29,40]
<font color="#C01C28">-    ldp x29, x30, [sp], 48</font>
     add x0, x0, :lo12:.LC9
     b puts
 .L26:
     ldr x19, [sp,16]
     adrp x0, .LC10 // &quot;a==b&quot;
<font color="#C01C28">-    ldp x29, x30, [sp], 48</font>
     add x0, x0, :lo12:.LC10
     b puts
</pre>
<p>We don’t need to store variable a in register 19 either since we only need to do the comparison once:</p>
<pre><b>--- tmp2.s</b>  <b>2023-03-25 14:46:42.466947431 +0100</b>
<b>+++ tmp3.s</b>   <b>2023-03-25 14:51:52.947461862 +0100</b>
<font color="#2AA1B3">@@ -31,23 +31,17 @@</font>
 f_unsigned:
     // W0=a, W1=b
     cmp w0, w1
<font color="#C01C28">-    str x19, [sp,16]</font>
<font color="#C01C28">-    mov w19, w0</font>
     bhi .L25 // Branch if HIgher (a&gt;b)
<font color="#C01C28">-    cmp w19, w1</font>
     beq .L26 // Branch if Equal (a==b)
 .L27:
<font color="#C01C28">-    ldr x19, [sp,16]</font>
     adrp x0, .LC11 // &quot;a&lt;b&quot;
     add x0, x0, :lo12:.LC11
     b puts
 .L25:
     adrp x0, .LC9 // &quot;a&gt;b&quot;
<font color="#C01C28">-    str x1, [x29,40]</font>
     add x0, x0, :lo12:.LC9
     b puts
 .L26:
<font color="#C01C28">-    ldr x19, [sp,16]</font>
     adrp x0, .LC10 // &quot;a==b&quot;
     add x0, x0, :lo12:.LC10
     b puts
</pre>
<p>Now we are left with the much smaller f functions:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f_signed:</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cmp</span> w0<span class="op">,</span> w1 <span class="op">//</span> W0<span class="op">=</span>a<span class="op">,</span> W1<span class="op">=</span>b</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    bgt <span class="op">.</span>L19 <span class="op">//</span> Branch if Greater Than <span class="op">(</span>a<span class="op">&gt;</span>b<span class="op">)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    beq <span class="op">.</span>L20 <span class="op">//</span> Branch if Equal <span class="op">(</span>a<span class="op">==</span>b<span class="op">)</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    // a<span class="op">&lt;</span>b</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC11 <span class="op">//</span> <span class="st">&quot;a&lt;b&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC11</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.L19:</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC9 <span class="op">//</span> <span class="st">&quot;a&gt;b&quot;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC9</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">.L20:</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC10 <span class="op">//</span> <span class="st">&quot;a==b&quot;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC10</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="fu">f_unsigned:</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">cmp</span> w0<span class="op">,</span> w1 <span class="op">//</span> W0<span class="op">=</span>a<span class="op">,</span> W1<span class="op">=</span>b</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    bhi <span class="op">.</span>L25 <span class="op">//</span> Branch if HIgher <span class="op">(</span>a<span class="op">&gt;</span>b<span class="op">)</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    beq <span class="op">.</span>L26 <span class="op">//</span> Branch if Equal <span class="op">(</span>a<span class="op">==</span>b<span class="op">)</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="fu">.L27:</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC11 <span class="op">//</span> <span class="st">&quot;a&lt;b&quot;</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC11</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="fu">.L25:</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC9 <span class="op">//</span> <span class="st">&quot;a&gt;b&quot;</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC9</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    b puts</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="fu">.L26:</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    adrp x0<span class="op">,</span> <span class="op">.</span>LC10 <span class="op">//</span> <span class="st">&quot;a==b&quot;</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">add</span> x0<span class="op">,</span> x0<span class="op">,</span> <span class="op">:</span>lo12<span class="op">:.</span>LC10</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    b puts</span></code></pre></div>
<h1 id="footer">Footer</h1>
<p>[1]: dead code is code that will never be executed</p>
</body>
</html>
